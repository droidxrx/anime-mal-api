var $3XHa3$superagent=require("superagent"),$3XHa3$cryptojs=require("crypto-js");function $parcel$export(e,n,v,s){Object.defineProperty(e,n,{get:v,set:s,enumerable:!0,configurable:!0})}function $8456cfbbccbcc379$var$generateRandomString(length){let text="";const possible="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~";for(let i=0;i<length;i++)text+=possible.charAt(Math.floor(Math.random()*possible.length));return text}function $8456cfbbccbcc379$var$base64URL(string){return string.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function $8456cfbbccbcc379$export$8ecb8b263ff087bb(length){const verifier=$8456cfbbccbcc379$var$generateRandomString(length);return{code_challenge:$8456cfbbccbcc379$var$base64URL($3XHa3$cryptojs.SHA256(verifier).toString($3XHa3$cryptojs.enc.Base64)),code_verifier:verifier}}function $8456cfbbccbcc379$export$834a37292c2ae57d(code_verifier,expectedChallenge){return $8456cfbbccbcc379$var$base64URL($3XHa3$cryptojs.SHA256(code_verifier).toString($3XHa3$cryptojs.enc.Base64))===expectedChallenge}$parcel$export(module.exports,"MAL_OAUTH2",(()=>$9a65fbdc3b638d40$export$9099ad97b570f7c)),$parcel$export(module.exports,"MAL_API_ANIME",(()=>$9acf8633448f150b$export$9099ad97b570f7c)),$parcel$export(module.exports,"MAL_API_ANIME_LIST",(()=>$69fd7a81d32ff78e$export$9099ad97b570f7c)),$parcel$export(module.exports,"MAL_API_MANGA",(()=>$d884b2b6a07a1921$export$9099ad97b570f7c)),$parcel$export(module.exports,"MAL_API_MANGA_LIST",(()=>$ec77bd5805fb2ef3$export$9099ad97b570f7c)),$parcel$export(module.exports,"MAL_API_USER",(()=>$8bcdcb5f1ce8927c$export$9099ad97b570f7c));class $9a65fbdc3b638d40$export$9099ad97b570f7c{constructor(CLIENT_ID,CLIENT_SECRET){this.baseurl="https://myanimelist.net/v1/oauth2",this.urlRedirect=`${this.baseurl}/authorize`,this.urlToken=`${this.baseurl}/token`,this.client_id=CLIENT_ID,this.client_secret=CLIENT_SECRET}generatePKCEChallenge(length=43){return length<43?console.log("Length Minimal 43"):length>128?console.log("Length Maximal 128"):$8456cfbbccbcc379$export$8ecb8b263ff087bb(length)}verifyPKCEChallenge(CODE_VERIFIER,CODE_CHALLENGE){return $8456cfbbccbcc379$export$834a37292c2ae57d(CODE_VERIFIER,CODE_CHALLENGE)}urlAuthorize(CODE_CHALLENGE,urlRedirect){const urlredirect=urlRedirect?`&redirect_uri=${urlRedirect}`:"";return this.redirect_uri=urlRedirect,`${this.urlRedirect}?response_type=code&client_id=${this.client_id}&code_challenge=${CODE_CHALLENGE}&code_challenge_method=plain${urlredirect}`}accessToken(code,codeVerifier){const data={client_id:this.client_id,client_secret:this.client_secret,code:code,code_verifier:codeVerifier,grant_type:"authorization_code"};return this.redirect_uri&&Object.assign(data,{redirect_uri:this.redirect_uri}),new Promise(((resolve,reject)=>{$3XHa3$superagent.post(this.urlToken).send(data).type("application/x-www-form-urlencoded").then((response=>resolve(response.body))).catch((error=>reject(JSON.parse(error.response.text))))}))}refreshToken(refresh_token){const data={client_id:this.client_id,client_secret:this.client_secret,refresh_token:refresh_token,grant_type:"refresh_token"};return new Promise(((resolve,reject)=>{$3XHa3$superagent.post(this.urlToken).send(data).type("application/x-www-form-urlencoded").then((response=>resolve(response.body))).catch((error=>reject(JSON.parse(error.response.text))))}))}}class $0ab7e8e169a68ebe$export$9099ad97b570f7c{constructor(access_token){this.urlBase="https://api.myanimelist.net/v2",this.token=access_token,this.agent=$3XHa3$superagent.agent().auth(this.token,{type:"bearer"})}callback(request,resolve,reject){request.then((response=>resolve({status:!0,result:response.body}))).catch((error=>reject(Object.assign({status:!1},JSON.parse(error.response.text)))))}get(params,query){const _url=`${this.urlBase}${params}`,request=this.agent.get(_url).query(query);return new Promise(((resolve,reject)=>this.callback(request,resolve,reject)))}del(animeOrManga,id){const _url=`${this.urlBase}/${animeOrManga}/${id}/my_list_status`,request=this.agent.delete(_url);return new Promise(((resolve,reject)=>this.callback(request,resolve,reject)))}put(animeOrManga,id,query){const _url=`${this.urlBase}/${animeOrManga}/${id}/my_list_status`,request=this.agent.put(_url).query(query).type("application/x-www-form-urlencoded");return new Promise(((resolve,reject)=>this.callback(request,resolve,reject)))}}var $32ddef2b511c99a6$export$9099ad97b570f7c={animeFull:["id","title","main_picture","alternative_titles","start_date","end_date","synopsis","mean","rank","popularity","num_list_users","num_scoring_users","nsfw","genres","created_at","updated_at","media_type","status","my_list_status","num_episodes","start_season","broadcast","source","average_episode_duration","rating","studios","pictures","background","related_anime","related_manga","recommendations","statistics"],animeInList:["id","title","main_picture","alternative_titles","start_date","end_date","synopsis","mean","rank","popularity","num_list_users","num_scoring_users","nsfw","genres","created_at","updated_at","media_type","status","my_list_status","num_episodes","start_season","broadcast","source","average_episode_duration","rating","studios"]};class $bc72c1820cc7cf4d$export$9099ad97b570f7c{getSeasonForNumberMonth(month){return month<3?"winter":month>2&&month<6?"spring":month>5&&month<9?"summer":"fall"}checkIfMonthIsValid(month){return-1!=this.months.indexOf(month)}constructor(){this.months=["winter","spring","summer","fall"]}}class $9acf8633448f150b$export$9099ad97b570f7c extends $0ab7e8e169a68ebe$export$9099ad97b570f7c{constructor(access_token){super(access_token),this.utils=new $bc72c1820cc7cf4d$export$9099ad97b570f7c}animeId({id:id,fields:fields=$32ddef2b511c99a6$export$9099ad97b570f7c.animeFull}){return this.get(`/anime/${id}`,{fields:fields.toString()})}animeSearch({q:q,offset:offset=0,limit:limit=100,fields:fields=$32ddef2b511c99a6$export$9099ad97b570f7c.animeInList}){const query={q:q,limit:limit,offset:offset,fields:fields.toString()};return this.get("/anime",query)}animeRanking({ranking_type:ranking_type="all",offset:offset=0,limit:limit=100,fields:fields=$32ddef2b511c99a6$export$9099ad97b570f7c.animeInList}){const query={ranking_type:ranking_type,limit:limit,offset:offset,fields:fields.toString()};return this.get("/anime/ranking",query)}animeSeasonal({year:year=(new Date).getFullYear(),season:season=this.utils.getSeasonForNumberMonth((new Date).getMonth()),offset:offset=0,limit:limit=100,sort:sort="",fields:fields=$32ddef2b511c99a6$export$9099ad97b570f7c.animeInList}){const query={year:year,season:season,offset:offset,limit:limit,sort:sort,fields:fields.toString()};return this.get(`/anime/season/${year}/${season}`,query)}animeSuggestions(offset=0,limit=100,fields=$32ddef2b511c99a6$export$9099ad97b570f7c.animeInList){const query={offset:offset,limit:limit,fields:fields.toString()};return this.get("/anime/suggestions",query)}}var $a274c1be2bd48f26$export$9099ad97b570f7c=["status","score","num_watched_episodes","is_rewatching","start_date","finish_date","priority","num_times_rewatched","rewatch_value","tags","updated_at","id","title","main_picture","alternative_titles","start_date","end_date","synopsis","mean","rank","popularity","num_list_users","num_scoring_users","nsfw","genres","created_at","updated_at","media_type","status","my_list_status","num_episodes","start_season","broadcast","source","average_episode_duration","rating","studios"];class $69fd7a81d32ff78e$export$9099ad97b570f7c extends $0ab7e8e169a68ebe$export$9099ad97b570f7c{constructor(access_token){super(access_token)}getList({user_name:user_name="@me",offset:offset=0,limit:limit=100,fields:fields=$a274c1be2bd48f26$export$9099ad97b570f7c}){const query={offset:offset,limit:limit,fields:fields.toString()};return this.get(`/users/${user_name}/animelist`,query)}deleteList(anime_id){return this.del("anime",anime_id)}updateList(anime_id,fieldsToUdpate){return this.put("anime",anime_id,fieldsToUdpate)}}var $0789dbd308eb334b$export$9099ad97b570f7c={mangaFull:["id","title","main_picture","alternative_titles","start_date","end_date","synopsis","mean","rank","popularity","num_list_users","num_scoring_users","nsfw","genres","created_at","updated_at","media_type","status","my_list_status","num_volumes","num_chapters","authors","pictures","background","related_anime","related_manga","recommendations","serialization"],mangaInList:["id","title","main_picture","alternative_titles","start_date","end_date","synopsis","mean","rank","popularity","num_list_users","num_scoring_users","nsfw","genres","created_at","updated_at","media_type","status","my_list_status","num_volumes","num_chapters","authors"]};class $d884b2b6a07a1921$export$9099ad97b570f7c extends $0ab7e8e169a68ebe$export$9099ad97b570f7c{constructor(access_token){super(access_token)}mangaId({id:id,fields:fields=$0789dbd308eb334b$export$9099ad97b570f7c.mangaFull}){const query={fields:fields.toString()};return this.get(`/manga/${id}`,query)}mangaSearch({q:q,offset:offset=0,limit:limit=100,fields:fields=$0789dbd308eb334b$export$9099ad97b570f7c.mangaInList}){const query={q:q,limit:limit,offset:offset,fields:fields.toString()};return this.get("/manga",query)}mangaRanking({ranking_type:ranking_type="all",offset:offset=0,limit:limit=100,fields:fields=$0789dbd308eb334b$export$9099ad97b570f7c.mangaInList}){const query={ranking_type:ranking_type,limit:limit,offset:offset,fields:fields.toString()};return this.get("/manga/ranking",query)}}var $de943b6ae0d8652e$export$9099ad97b570f7c=["status","score","num_volumes_read","num_chapters_read","is_rereading","start_date","finish_date","priority","num_times_reread","reread_value","tags","updated_at","id","title","main_picture","alternative_titles","start_date","end_date","synopsis","mean","rank","popularity","num_list_users","num_scoring_users","nsfw","genres","created_at","updated_at","media_type","status","my_list_status","num_volumes","num_chapters","authors"];class $ec77bd5805fb2ef3$export$9099ad97b570f7c extends $0ab7e8e169a68ebe$export$9099ad97b570f7c{constructor(access_token){super(access_token)}getList({user_name:user_name="@me",offset:offset=0,limit:limit=100,fields:fields=$de943b6ae0d8652e$export$9099ad97b570f7c}){const query={offset:offset,limit:limit,fields:fields.toString()};return this.get(`/users/${user_name}/mangalist`,query)}deleteList(manga_id){return this.del("manga",manga_id)}updateList(anime_id,fieldsToUdpate){return this.put("manga",anime_id,fieldsToUdpate)}}var $fbd074bc4b3a10ff$export$9099ad97b570f7c=["id","name","picture","gender","birthday","location","joined_at","anime_statistics","time_zone","is_supporter"];class $8bcdcb5f1ce8927c$export$9099ad97b570f7c extends $0ab7e8e169a68ebe$export$9099ad97b570f7c{constructor(access_token){super(access_token)}me(fields=$fbd074bc4b3a10ff$export$9099ad97b570f7c){return this.get("/users/@me",{fields:fields.toString()})}}