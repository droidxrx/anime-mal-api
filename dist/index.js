var $9CO2B$superagent=require("superagent"),$9CO2B$cryptojs=require("crypto-js");function $parcel$export(e,n,v,s){Object.defineProperty(e,n,{get:v,set:s,enumerable:!0,configurable:!0})}function $8456cfbbccbcc379$var$generateRandomString(length){let text="";const possible="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~";for(let i=0;i<length;i++)text+=possible.charAt(Math.floor(Math.random()*possible.length));return text}function $8456cfbbccbcc379$var$base64URL(string){return string.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function $8456cfbbccbcc379$export$8ecb8b263ff087bb(length){const verifier=$8456cfbbccbcc379$var$generateRandomString(length);return{code_challenge:$8456cfbbccbcc379$var$base64URL($9CO2B$cryptojs.SHA256(verifier).toString($9CO2B$cryptojs.enc.Base64)),code_verifier:verifier}}function $8456cfbbccbcc379$export$834a37292c2ae57d(code_verifier,expectedChallenge){return $8456cfbbccbcc379$var$base64URL($9CO2B$cryptojs.SHA256(code_verifier).toString($9CO2B$cryptojs.enc.Base64))===expectedChallenge}$parcel$export(module.exports,"MAL_OAUTH2",(()=>$9a65fbdc3b638d40$export$9099ad97b570f7c)),$parcel$export(module.exports,"MAL_API_ANIME",(()=>$9acf8633448f150b$export$9099ad97b570f7c)),$parcel$export(module.exports,"MAL_API_MANGA",(()=>$d884b2b6a07a1921$export$9099ad97b570f7c));class $9a65fbdc3b638d40$export$9099ad97b570f7c{constructor(CLIENT_ID,CLIENT_SECRET){this.baseurl="https://myanimelist.net/v1/oauth2",this.urlRedirect=`${this.baseurl}/authorize`,this.urlToken=`${this.baseurl}/token`,this.client_id=CLIENT_ID,this.client_secret=CLIENT_SECRET}generatePKCEChallenge(length=43){return length<43?console.log("Length Minimal 43"):length>128?console.log("Length Maximal 128"):$8456cfbbccbcc379$export$8ecb8b263ff087bb(length)}verifyPKCEChallenge(CODE_VERIFIER,CODE_CHALLENGE){return $8456cfbbccbcc379$export$834a37292c2ae57d(CODE_VERIFIER,CODE_CHALLENGE)}urlAuthorize(CODE_CHALLENGE,urlRedirect){const urlredirect=urlRedirect?`&redirect_uri=${urlRedirect}`:"";return this.redirect_uri=urlRedirect,`${this.urlRedirect}?response_type=code&client_id=${this.client_id}&code_challenge=${CODE_CHALLENGE}&code_challenge_method=plain${urlredirect}`}accessToken(code,codeVerifier){const data={client_id:this.client_id,client_secret:this.client_secret,code:code,code_verifier:codeVerifier,grant_type:"authorization_code"};return this.redirect_uri&&Object.assign(data,{redirect_uri:this.redirect_uri}),new Promise(((resolve,reject)=>{$9CO2B$superagent.post(this.urlToken).send(data).type("application/x-www-form-urlencoded").then((response=>resolve(response.body))).catch((error=>reject(JSON.parse(error.response.text))))}))}refreshToken(refresh_token){const data={client_id:this.client_id,client_secret:this.client_secret,refresh_token:refresh_token,grant_type:"refresh_token"};return new Promise(((resolve,reject)=>{$9CO2B$superagent.post(this.urlToken).send(data).type("application/x-www-form-urlencoded").then((response=>resolve(response.body))).catch((error=>reject(JSON.parse(error.response.text))))}))}}class $0ab7e8e169a68ebe$export$9099ad97b570f7c{constructor(access_token){this.urlBase="https://api.myanimelist.net/v2",this.token=access_token}get(params){return $9CO2B$superagent.get(`${this.urlBase}${params}`).auth(this.token,{type:"bearer"})}}var $32ddef2b511c99a6$export$9099ad97b570f7c={animeFull:["id","title","main_picture","alternative_titles","start_date","end_date","synopsis","mean","rank","popularity","num_list_users","num_scoring_users","nsfw","genres","created_at","updated_at","media_type","status","my_list_status","num_episodes","start_season","broadcast","source","average_episode_duration","rating","studios","pictures","background","related_anime","related_manga","recommendations","statistics"],animeInList:["id","title","main_picture","alternative_titles","start_date","end_date","synopsis","mean","rank","popularity","num_list_users","num_scoring_users","nsfw","genres","created_at","updated_at","media_type","status","my_list_status","num_episodes","start_season","broadcast","source","average_episode_duration","rating","studios"]};class $bc72c1820cc7cf4d$export$9099ad97b570f7c{getSeasonForNumberMonth(month){return month<3?"winter":month>2&&month<6?"spring":month>5&&month<9?"summer":"fall"}checkIfMonthIsValid(month){return-1!=this.months.indexOf(month)}constructor(){this.months=["winter","spring","summer","fall"]}}class $9acf8633448f150b$export$9099ad97b570f7c extends $0ab7e8e169a68ebe$export$9099ad97b570f7c{constructor(access_token){super(access_token),this.utils=new $bc72c1820cc7cf4d$export$9099ad97b570f7c}animeId({id:id,fields:fields=$32ddef2b511c99a6$export$9099ad97b570f7c.animeFull}){return new Promise(((resolve,reject)=>{this.get(`/anime/${id}`).query({fields:fields.toString()}).then((response=>resolve({status:!0,result:response.body}))).catch((error=>reject(Object.assign({status:!1},JSON.parse(error.response.text)))))}))}animeSearch({q:q,offset:offset=0,limit:limit=100,fields:fields=$32ddef2b511c99a6$export$9099ad97b570f7c.animeInList}){return new Promise(((resolve,reject)=>{this.get("/anime").query({q:q,limit:limit,offset:offset,fields:fields.toString()}).then((response=>resolve({status:!0,result:response.body}))).catch((error=>reject(Object.assign({status:!1},JSON.parse(error.response.text)))))}))}animeRanking({ranking_type:ranking_type="all",offset:offset=0,limit:limit=100,fields:fields=$32ddef2b511c99a6$export$9099ad97b570f7c.animeInList}){return new Promise(((resolve,reject)=>{this.get("/anime/ranking").query({ranking_type:ranking_type,limit:limit,offset:offset,fields:fields.toString()}).then((response=>resolve({status:!0,result:response.body}))).catch((error=>reject(Object.assign({status:!1},JSON.parse(error.response.text)))))}))}animeSeasonal({year:year=(new Date).getFullYear(),season:season=this.utils.getSeasonForNumberMonth((new Date).getMonth()),offset:offset=0,limit:limit=100,sort:sort="",fields:fields=$32ddef2b511c99a6$export$9099ad97b570f7c.animeInList}){return new Promise(((resolve,reject)=>{this.utils.checkIfMonthIsValid(season)?this.get("/anime/ranking").query({year:year,season:season,offset:offset,limit:limit,sort:sort,fields:fields.toString()}).then((response=>resolve({status:!0,result:response.body}))).catch((error=>reject(Object.assign({status:!1},JSON.parse(error.response.text))))):reject({status:!1,error:"Enter a valid season: winter, spring, summer, fall"})}))}animeSuggestions(offset=0,limit=100,fields=$32ddef2b511c99a6$export$9099ad97b570f7c.animeInList){return new Promise(((resolve,reject)=>{this.get("/anime/suggestions").query({offset:offset,limit:limit,fields:fields.toString()}).then((response=>resolve({status:!0,result:response.body}))).catch((error=>reject(Object.assign({status:!1},JSON.parse(error.response.text)))))}))}}var $0789dbd308eb334b$export$9099ad97b570f7c={mangaFull:["id","title","main_picture","alternative_titles","start_date","end_date","synopsis","mean","rank","popularity","num_list_users","num_scoring_users","nsfw","genres","created_at","updated_at","media_type","status","my_list_status","num_volumes","num_chapters","authors","pictures","background","related_anime","related_manga","recommendations","serialization"],mangaInList:["id","title","main_picture","alternative_titles","start_date","end_date","synopsis","mean","rank","popularity","num_list_users","num_scoring_users","nsfw","genres","created_at","updated_at","media_type","status","my_list_status","num_volumes","num_chapters","authors"]};class $d884b2b6a07a1921$export$9099ad97b570f7c extends $0ab7e8e169a68ebe$export$9099ad97b570f7c{constructor(access_token){super(access_token)}mangaId({id:id,fields:fields=$0789dbd308eb334b$export$9099ad97b570f7c.mangaFull}){return new Promise(((resolve,reject)=>{this.get(`/manga/${id}`).query({fields:fields.toString()}).then((response=>resolve({status:!0,result:response.body}))).catch((error=>reject(Object.assign({status:!1},JSON.parse(error.response.text)))))}))}mangaSearch({q:q,offset:offset=0,limit:limit=100,fields:fields=$0789dbd308eb334b$export$9099ad97b570f7c.mangaInList}){return new Promise(((resolve,reject)=>{this.get("/manga").query({q:q,limit:limit,offset:offset,fields:fields.toString()}).then((response=>resolve({status:!0,result:response.body}))).catch((error=>reject(Object.assign({status:!1},JSON.parse(error.response.text)))))}))}mangaRanking({ranking_type:ranking_type="all",offset:offset=0,limit:limit=100,fields:fields=$0789dbd308eb334b$export$9099ad97b570f7c.mangaInList}){return new Promise(((resolve,reject)=>{this.get("/manga/ranking").query({ranking_type:ranking_type,limit:limit,offset:offset,fields:fields.toString()}).then((response=>resolve({status:!0,result:response.body}))).catch((error=>reject(Object.assign({status:!1},JSON.parse(error.response.text)))))}))}}window&&(window.MAL_API={OAUTH2:$9a65fbdc3b638d40$export$9099ad97b570f7c,ANIME:$9acf8633448f150b$export$9099ad97b570f7c,MANGA:$d884b2b6a07a1921$export$9099ad97b570f7c});